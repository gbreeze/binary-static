{"version":3,"sources":["../../../src/javascript/landing_pages/common.js"],"names":["checkWidth","mq","window","matchMedia","matches","document","getElementById","scrollHeight","toggleMobileMenu","toggleButton","navbar","navbar_item","getElementsByClassName","el_language_dropdown","addEventListener","e","stopPropagation","classList","toggle","test","toggleAllSiblings","parentNode","filterById","remove","collapseMenu","scrollTo","to","duration","start","pageYOffset","change","increment","currentTime","animateScroll","val","Math","easeInOutQuad","body","scrollTop","documentElement","setTimeout","current_time","start_value","change_in_value","curr_time","getParamValue","url","key","regex","RegExp","results","exec","decodeURIComponent","replace","allLanguages","getLanguage","language","location","href","toLowerCase","split","slice","forEach","l","indexOf","urlFor","path","lang","substring","length","wsConnect","config_server","localStorage","getItem","server_url","endpointNotification","WebSocket","getAppId","hostname","wsSend","ws","request","send","JSON","stringify","el_end_note","createElement","setAttribute","innerHTML","appendChild","style","offsetHeight","NodeList","prototype","callback","thisArg","i","call","elem","id","filter","class_name","el","firstChild","nodeType","nextSibling","setupCrowdin","isInContextEnvironment","el_lang","display","_jipt","push","crowdinScript","protocol","commonOnload","outdatedBrowser","src","querySelector","el_message","message","$buoop","vs","f","o","s","c","api","noclose","text","reminder","script"],"mappings":"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","file":"common.js","sourcesContent":["/* eslint-disable no-unused-vars */\r\n// Check view width, add navbar height as offset if on desktop\r\nfunction checkWidth() {\r\n    const mq = window.matchMedia('(max-width: 1199px)');\r\n    return (mq.matches ? 50 : (document.getElementById('navigation') || '').scrollHeight);\r\n}\r\n\r\nfunction toggleMobileMenu() {\r\n    const toggleButton = document.getElementById('toggle-menu');\r\n    if (!toggleButton) return;\r\n    const navbar       = document.getElementById('navigation');\r\n    const navbar_item  = document.getElementsByClassName('navbar-collapse')[0];\r\n    const el_language_dropdown = document.getElementsByClassName('language-dropdown')[0];\r\n    toggleButton.addEventListener('click', (e) => {\r\n        e.stopPropagation();\r\n        navbar.classList.toggle('expand');\r\n        navbar_item.classList.toggle('expand');\r\n        if (el_language_dropdown && /show/.test(el_language_dropdown.classList)) {\r\n            toggleAllSiblings(el_language_dropdown.parentNode, filterById, 'invisible');\r\n            el_language_dropdown.classList.remove('show');\r\n        }\r\n    });\r\n}\r\n\r\nfunction collapseMenu() {\r\n    const navbar      = document.getElementById('navigation');\r\n    const navbar_item = document.getElementsByClassName('navbar-collapse')[0];\r\n    if (navbar && navbar_item) {\r\n        navbar.classList.remove('expand');\r\n        navbar_item.classList.remove('expand');\r\n    }\r\n}\r\n\r\n// scrollTo function with animation\r\n// - Gist reference: https://gist.github.com/andjosh/6764939\r\nfunction scrollTo(to, duration = 1000) {\r\n    if (typeof to === 'undefined') return;\r\n    const start     = window.pageYOffset;\r\n    const change    = to - start;\r\n    const increment = 20;\r\n    let currentTime = 0;\r\n\r\n    const animateScroll = () => {\r\n        currentTime += increment;\r\n        const val = Math.easeInOutQuad(currentTime, start, change, duration);\r\n        document.body.scrollTop = val;\r\n        document.documentElement.scrollTop = val;\r\n        if (currentTime < duration) {\r\n            setTimeout(animateScroll, increment);\r\n        }\r\n    };\r\n    animateScroll();\r\n}\r\n\r\nMath.easeInOutQuad = function(current_time, start_value, change_in_value, duration) {\r\n    let curr_time = current_time;\r\n    curr_time /= duration / 2;\r\n    if (curr_time < 1) return change_in_value / 2 * curr_time * curr_time + start_value;\r\n    curr_time--;\r\n    return -change_in_value / 2 * (curr_time * (curr_time - 2) - 1) + start_value;\r\n};\r\n\r\nfunction getParamValue(url, key) {\r\n    const regex   = new RegExp(`[?&]${key}(=([^&#]*)|&|#|$)`);\r\n    const results = regex.exec(url);\r\n    if (!results || !results[2]) return '';\r\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\r\n}\r\n\r\nfunction allLanguages() {\r\n    return [ 'en', 'de', 'es', 'fr', 'id', 'it', 'ko', 'ja', 'pl', 'pt', 'ru', 'th', 'vi', 'zh_cn', 'zh_tw', 'ach' ];\r\n}\r\n\r\nfunction getLanguage() {\r\n    let language;\r\n    window.location.href.toLowerCase().split('/').slice(3).forEach((l) => { // forEach() has more browser compatibility than 'Array.find()'\r\n        if (!language && allLanguages().indexOf(l) >= 0) language = l;\r\n    });\r\n    return language || 'en';\r\n}\r\n\r\nfunction urlFor(path) {\r\n    const lang = getLanguage();\r\n    const url  = window.location.href;\r\n    return `${url.substring(0, url.indexOf(`/${lang}/`) + lang.length + 2)}${path}.html`;\r\n}\r\n\r\nfunction wsConnect() {\r\n    const config_server = localStorage.getItem('config.server_url');\r\n    const server_url    = config_server || 'frontend.binaryws.com';\r\n    endpointNotification(config_server);\r\n\r\n    return new WebSocket(`wss://${server_url}/websockets/v3?app_id=${getAppId()}&l=${getLanguage()}`);\r\n}\r\n\r\nfunction getAppId() {\r\n    return localStorage.getItem('config.app_id') || (/staging\\.binary\\.com/i.test(window.location.hostname) ? '1098' : '1');\r\n}\r\n\r\nfunction wsSend(ws, request) {\r\n    if (ws && request && typeof request === 'object') {\r\n        ws.send(JSON.stringify(request));\r\n    }\r\n}\r\n\r\nfunction endpointNotification (config_server) {\r\n    if (config_server && config_server.length > 0 && !document.getElementById('end_note')) {\r\n        const el_end_note = document.createElement('div');\r\n        el_end_note.setAttribute('id', 'end_note');\r\n        el_end_note.innerHTML = `The server <a href=\"${urlFor('endpoint')}\">endpoint</a> is: ${config_server}`;\r\n        document.body.appendChild(el_end_note);\r\n        document.body.style['padding-bottom'] = `${el_end_note.offsetHeight}px`;\r\n    }\r\n}\r\n\r\n// NodeList foreach polyfill\r\nif (window.NodeList && !NodeList.prototype.forEach) {\r\n    NodeList.prototype.forEach = function (callback, thisArg = window) {\r\n        for (let i = 0; i < this.length; i++) {\r\n            callback.call(thisArg, this[i], i, this);\r\n        }\r\n    };\r\n}\r\n\r\nfunction filterById(elem) {\r\n    return !((/^(language)$/i.test(elem.id)));\r\n}\r\n\r\nfunction toggleAllSiblings(elem, filter, class_name) {\r\n    let el = elem.parentNode.firstChild;\r\n    do {\r\n        if (el.nodeType !== 3 && (!filter || filter(el))) {\r\n            el.classList.toggle(class_name);\r\n        }\r\n        el = el.nextSibling;\r\n    } while (el);\r\n}\r\n\r\nfunction setupCrowdin() {\r\n    const isInContextEnvironment = () => (\r\n        /^https:\\/\\/staging\\.binary\\.com\\/translations\\//i.test(window.location.href) &&\r\n            /ach/i.test(getLanguage())\r\n    );\r\n\r\n    if (isInContextEnvironment()) {\r\n        const el_lang = document.getElementById('language');\r\n        if (el_lang) el_lang.style.display = 'none';\r\n        /* eslint-disable no-underscore-dangle */\r\n        window._jipt = [];\r\n        window._jipt.push(['project', 'binary-static']);\r\n        /* eslint-enable no-underscore-dangle */\r\n        if (document.body) {\r\n            const crowdinScript = document.createElement('script');\r\n            crowdinScript.setAttribute('src', `${document.location.protocol}//cdn.crowdin.com/jipt/jipt.js`);\r\n            crowdinScript.setAttribute('type', 'text/javascript');\r\n            document.body.appendChild(crowdinScript);\r\n        }\r\n    }\r\n}\r\n\r\nfunction commonOnload() {\r\n    setupCrowdin();\r\n}\r\n\r\n// displays notification on outdated browsers\r\nfunction outdatedBrowser() {\r\n    const src = '//browser-update.org/update.min.js';\r\n    if (document.querySelector(`script[src*=\"${src}\"]`)) return;\r\n    const el_message = document.getElementById('outdated_browser_message');\r\n    const message = el_message ? el_message.innerHTML : 'Your web browser ({brow_name}) is out of date and may affect your trading experience. Proceed at your own risk. <a href=\"https://www.whatbrowser.org/\" target=\"_blank\">Update browser</a>';\r\n    window.$buoop = {\r\n        vs      : { i: 11, f: -4, o: -4, s: 9, c: -4 },\r\n        api     : 4,\r\n        url     : 'https://whatbrowser.org/',\r\n        noclose : true, // Do not show the 'ignore' button to close the notification\r\n        text    : message,\r\n        reminder: 0, // show all the time\r\n    };\r\n    if (document.body) {\r\n        const script = document.createElement('script');\r\n        script.setAttribute('src', src);\r\n        document.body.appendChild(script);\r\n    }\r\n}\r\n\r\nwindow.addEventListener('load', () => { // being called before js code of each page\r\n    outdatedBrowser();\r\n});\r\n"]}